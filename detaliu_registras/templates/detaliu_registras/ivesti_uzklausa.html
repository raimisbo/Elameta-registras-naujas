{% extends "base.html" %}
{% block title %}Nauja užklausa{% endblock %}

{% block content %}
<div class="container">
  <h1>Nauja užklausa</h1>

  {% if form.non_field_errors %}
    <div class="flash flash-error">{{ form.non_field_errors }}</div>
  {% endif %}

  <form method="post" novalidate>
    {% csrf_token %}

    <fieldset class="box">
      <legend>Klientas</legend>
      <div class="grid">
        <div class="field"><label>Pasirinkti esamą</label>{{ form.klientas }}</div>
        <div class="field"><label>Arba įrašyti naują</label>{{ form.naujas_klientas }}</div>
      </div>
    </fieldset>

    <fieldset class="box">
      <legend>Projektas</legend>
      <div class="grid">
        <div class="field"><label>Pasirinkti esamą</label>{{ form.projektas }}</div>
        <div class="field"><label>Arba įrašyti naują</label>{{ form.naujas_projektas }}</div>
      </div>
    </fieldset>

    <fieldset class="box">
      <legend>Detalė</legend>
      <div class="grid">
        <div class="field"><label>Pasirinkti esamą</label>{{ form.detale }}</div>
        <div class="field"><label>Naujos detalės pavadinimas</label>{{ form.detales_pavadinimas }}</div>
        <div class="field"><label>Brėžinio nr.</label>{{ form.brezinio_nr }}</div>
      </div>
    </fieldset>

    <fieldset class="box">
      <legend>Specifikacija (nebūtina)</legend>
      <div class="grid">
        <div class="field"><label>Metalas</label>{{ form.metalas }}</div>
        <div class="field"><label>Plotas m²</label>{{ form.plotas_m2 }}</div>
        <div class="field"><label>Svoris kg</label>{{ form.svoris_kg }}</div>
      </div>
    </fieldset>

    <fieldset class="box">
      <legend>Paviršių dangos (nebūtina)</legend>
      <div class="grid">
        <div class="field"><label>KTL / e-coating</label>{{ form.ktl_ec_name }}</div>
        <div class="field"><label>Miltelinis padengimas</label>{{ form.miltelinis_name }}</div>
      </div>
    </fieldset>

    <div class="actions" style="margin-top:12px;display:flex;gap:8px">
      <button class="btn" type="submit">Sukurti</button>
      <a class="btn btn-secondary" href="{% url 'detaliu_registras:uzklausa_list' %}">Atgal į sąrašą</a>
    </div>
  </form>
</div>

<style>
.container{max-width:960px;margin:0 auto;padding:0 16px}
.grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
@media(max-width:640px){.grid{grid-template-columns:1fr}}
.box{border:1px solid #e5e7eb;border-radius:8px;padding:12px;margin:12px 0;background:#fff}
.field{display:flex;flex-direction:column;gap:6px}
.field input,.field select{padding:8px 10px;border:1px solid #d1d5db;border-radius:6px}
</style>
{% endblock %}
