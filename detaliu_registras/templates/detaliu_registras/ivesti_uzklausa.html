{% extends "base.html" %}
{% block title %}Nauja užklausa{% endblock %}

{% block content %}
<h1>Nauja užklausa</h1>

<form method="post" novalidate>
  {% csrf_token %}
  {% if form.non_field_errors %}
    <div class="flash flash-error">{{ form.non_field_errors }}</div>
  {% endif %}

  <section style="margin-top:12px">
    <h3>Klientas</h3>
    <div class="form-field">
      <label>Esamas klientas</label>
      {{ form.klientas }}
    </div>
    <div class="form-field">
      <label>Naujas klientas</label>
      {{ form.naujas_klientas }}
    </div>
  </section>

  <section style="margin-top:18px">
    <h3>Projektas</h3>
    <div class="form-field">
      <label>Esamas projektas</label>
      {{ form.projektas }}
    </div>
    <div class="form-field">
      <label>Naujas projektas</label>
      {{ form.naujas_projektas }}
    </div>
  </section>

  <section style="margin-top:18px">
    <h3>Detalė</h3>
    <div class="form-field">
      <label>Esama detalė</label>
      {{ form.detale }}
    </div>
    <div class="form-field">
      <label>Nauja detalė – pavadinimas</label>
      {{ form.detales_pavadinimas }}
    </div>
    <div class="form-field">
      <label>Brėžinio nr.</label>
      {{ form.brezinio_nr }}
    </div>
  </section>

  <section style="margin-top:18px">
    <h3>Specifikacija</h3>
    <div class="form-grid">
      <div class="form-field">
        <label>Metalas</label>
        {{ form.metalas }}
      </div>
      <div class="form-field">
        <label>Plotas m²</label>
        {{ form.plotas_m2 }}
      </div>
      <div class="form-field">
        <label>Svoris kg</label>
        {{ form.svoris_kg }}
      </div>
      <div class="form-field">
        <label>Medžiagos kodas</label>
        {{ form.medziagos_kodas }}
      </div>
    </div>
  </section>

  <section style="margin-top:18px">
    <h3>Dangos</h3>
    <div class="form-grid">
      <div class="form-field">
        <label>KTL / e-coating</label>
        {{ form.ktl_ec_name }}
      </div>
      <div class="form-field">
        <label>Miltelinis padengimas</label>
        {{ form.miltelinis_name }}
      </div>
      <div class="form-field">
        <label>RAL / spalva</label>
        {{ form.spalva_ral }}
      </div>
      <div class="form-field">
        <label>Blizgumas / tekstūra</label>
        {{ form.blizgumas }}
      </div>
    </div>
  </section>

  <section style="margin-top:18px">
    <h3>Pradinė kaina (neprivaloma)</h3>
    <p class="help" style="margin:6px 0 12px; color:#475569">
      Jei nurodysite sumą, sistema iškart sukurs pradinę kainą šiai užklausai.
    </p>
    <div class="form-grid">
      <div class="form-field">
        <label>Kaina</label>
        {{ form.kaina_suma }}
      </div>
      <div class="form-field">
        <label>Valiuta</label>
        {{ form.kaina_valiuta }}
      </div>
      <div class="form-field" style="grid-column: 1 / -1;">
        <label>Priežastis</label>
        {{ form.kaina_priezastis }}
      </div>
    </div>
  </section>

  <div style="margin-top:20px">
    <button class="btn" type="submit">Išsaugoti užklausą</button>
    <a class="btn btn-secondary" href="{% url 'detaliu_registras:uzklausa_list' %}">Atšaukti</a>
  </div>
</form>

{% endblock %}

{% block extra_head %}
<style>
  .form-field{margin:8px 0}
  .form-grid{display:grid; gap:12px; grid-template-columns: repeat(2, minmax(0,1fr));}
  @media (max-width: 720px){ .form-grid{grid-template-columns: 1fr;} }
  label{display:block; font-weight:600; margin-bottom:4px}
  input, select, textarea{width:100%; padding:8px 10px; border:1px solid #cbd5e1; border-radius:8px; background:#fff}
</style>
{% endblock %}
