{% load attr %}

{% for it in items %}
<tr onclick="location.href='{% url 'pozicijos:detail' it.id %}'" style="cursor:pointer;">
  {% for c in columns_schema %}
    {% if c.key in visible_cols %}
      <td data-key="{{ c.key }}">
        {# Specialūs atvaizdavimai pasirinkimams (choices) #}
        {% if c.key == "maskavimo_tipas" %}
          {{ it.get_maskavimo_tipas_display|default:"—" }}

        {% elif c.key == "pakavimo_tipas" %}
          {{ it.get_pakavimo_tipas_display|default:"—" }}

        {% elif c.key == "atlikimo_terminas" %}
          {% if it.atlikimo_terminas is not None %}
            {{ it.atlikimo_terminas }} d.d.
          {% else %}
            —
          {% endif %}

        {% elif c.key == "matmenys_xyz" %}
          {{ it.matmenys_xyz|default:"—" }}

        {% elif c.key == "padengimo_storis_um" %}
          {% if it.padengimo_storis_um is not None %}
            {{ it.padengimo_storis_um }} µm
          {% else %}
            —
          {% endif %}

        {% else %}
          {{ it|attr:c.key|default:"—" }}
        {% endif %}
      </td>
    {% endif %}
  {% endfor %}
</tr>
{% empty %}
<tr><td colspan="{{ visible_cols|length }}">Nėra įrašų.</td></tr>
{% endfor %}
